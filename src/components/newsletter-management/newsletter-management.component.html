<div class="space-y-8 animate-fade-in">
  <div>
    <h1 class="text-2xl font-bold text-gray-900">إدارة القائمة البريدية</h1>
    <p class="text-gray-500 mt-1">
      عرض وتصدير قائمة المشتركين في النشرة البريدية للمنصة.
    </p>
  </div>

  <div class="bg-base-200/50 p-6 rounded-xl shadow-inner">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold">قائمة المشتركين ({{ subscribers().length }})</h2>
        <button (click)="exportSubscribers()" [disabled]="subscribers().length === 0" class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:bg-gray-400">
            تصدير كـ CSV
        </button>
      </div>
      <div class="overflow-x-auto relative shadow-md sm:rounded-lg max-h-96">
        <table class="w-full text-sm text-right text-gray-500">
          <thead class="text-xs text-gray-700 uppercase bg-gray-50 sticky top-0">
            <tr>
              <th scope="col" class="py-3 px-6">البريد الإلكتروني</th>
              <th scope="col" class="py-3 px-6">تاريخ الاشتراك</th>
            </tr>
          </thead>
          <tbody>
            @for(sub of subscribers(); track sub.email) {
              <tr class="bg-white border-b">
                <td class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap">{{ sub.email }}</td>
                <td class="py-4 px-6">{{ sub.subscribedAt.toLocaleString('ar-EG') }}</td>
              </tr>
            } @empty {
                 <tr class="bg-white border-b">
                    <td colspan="2" class="py-8 px-6 text-center text-gray-500">
                        لا يوجد مشتركين في القائمة البريدية بعد.
                    </td>
                </tr>
            }
          </tbody>
        </table>
      </div>
  </div>
</div>
