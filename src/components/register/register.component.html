<div class="bg-base-200 py-12 px-4 sm:px-6 lg:px-8 flex-grow flex items-center justify-center">
  <div class="w-full max-w-lg">
    <div class="bg-base-100 rounded-2xl shadow-xl p-8">
      
      @switch (step()) {
        @case (1) {
          <!-- Step 1: Initial Registration -->
          <div class="text-center">
             <img src="assets/logo.png" alt="Press House Logo" class="h-16 mx-auto mb-4">
            <h2 class="text-3xl font-bold text-ph-blue">إنشاء حساب جديد</h2>
            <p class="mt-3 text-gray-600">
              انضم إلى منصة الصحفي اليمني للوصول إلى أدوات تحقيق حصرية.
            </p>
          </div>

          <div class="mt-8 space-y-4">
             <div class="grid grid-cols-2 gap-3">
                <button (click)="handleSocialRegister('Google')" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                  <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google Login">
                  <span class="sr-only">Google</span>
                </button>
                <button (click)="handleSocialRegister('X')" class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                  <img src="https://www.svgrepo.com/show/513008/twitter-154.svg" class="w-5 h-5" alt="X Login">
                   <span class="sr-only">X/Twitter</span>
                </button>
             </div>
             <div class="relative flex py-3 items-center">
                <div class="flex-grow border-t border-gray-300"></div>
                <span class="flex-shrink mx-4 text-xs text-gray-400">أو سجل باستخدام البريد الإلكتروني</span>
                <div class="flex-grow border-t border-gray-300"></div>
            </div>
            <form #emailForm="ngForm" (ngSubmit)="handleEmailRegister()" class="space-y-4">
              <div>
                <label for="name" class="sr-only">الاسم الكامل</label>
                <input type="text" name="name" [(ngModel)]="name" required class="w-full p-3 rounded-lg border border-gray-300 bg-gray-50" placeholder="الاسم الكامل">
              </div>
              <div>
                <label for="email" class="sr-only">البريد الإلكتروني</label>
                <input type="email" name="email" [(ngModel)]="email" required email class="w-full p-3 rounded-lg border border-gray-300 bg-gray-50" placeholder="البريد الإلكتروني">
              </div>
              <div>
                <label for="password" class="sr-only">كلمة المرور</label>
                <input type="password" name="password" [(ngModel)]="password" required minlength="8" class="w-full p-3 rounded-lg border border-gray-300 bg-gray-50" placeholder="كلمة المرور">
              </div>
               <button type="submit" [disabled]="emailForm.invalid" class="w-full py-3 text-md font-bold text-white rounded-lg bg-ph-blue hover:bg-ph-blue-dark disabled:bg-gray-400 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
                  متابعة
              </button>
            </form>
          </div>
        }
        @case (2) {
          <!-- Step 2: Additional Info Confirmation -->
           <div class="text-center">
            <h2 class="text-3xl font-bold text-ph-blue">الخطوة الأخيرة</h2>
            <p class="mt-3 text-gray-600">
              لتأمين حسابك وتسهيل التواصل، يرجى تأكيد معلومات الاتصال التالية.
            </p>
          </div>
          <div class="mt-8">
            <form #confirmForm="ngForm" (ngSubmit)="completeRegistration()" class="space-y-4">
                @if(method() === 'social') {
                  <div class="p-3 rounded-lg bg-base-200">
                    <p class="text-sm font-semibold">الاسم: <span class="font-normal">{{ name() }}</span></p>
                    <p class="text-sm font-semibold">البريد الإلكتروني: <span class="font-normal">{{ email() }}</span></p>
                  </div>
                }
                 <div>
                    <label for="phone" class="block mb-2 text-sm font-medium">رقم الهاتف (مع رمز الدولة)</label>
                    <input type="tel" name="phone" [(ngModel)]="phone" required class="w-full p-3 rounded-lg border border-gray-300 bg-gray-50" placeholder="+967 777 777 777">
                </div>
                 <div>
                    <label for="whatsapp" class="block mb-2 text-sm font-medium">رقم واتساب (اختياري)</label>
                    <input type="tel" name="whatsapp" [(ngModel)]="whatsapp" class="w-full p-3 rounded-lg border border-gray-300 bg-gray-50" placeholder="+967 777 777 777">
                </div>
                
                <div class="pt-2">
                    <label for="terms" class="flex items-start">
                      <input id="terms" name="terms" type="checkbox" [(ngModel)]="agreedToTerms" class="h-4 w-4 rounded border-gray-300 text-ph-blue focus:ring-ph-blue mt-1">
                      <span class="ms-3 text-sm text-gray-600">
                        لقد قرأت وأوافق على
                        <a (click)="navigate.emit('terms-of-service')" href="javascript:void(0)" class="font-semibold text-ph-blue hover:underline">شروط الخدمة</a>،
                        <a (click)="navigate.emit('privacy-policy')" href="javascript:void(0)" class="font-semibold text-ph-blue hover:underline">سياسة الخصوصية</a>، و
                        <a (click)="navigate.emit('disclaimer')" href="javascript:void(0)" class="font-semibold text-ph-blue hover:underline">إخلاء المسؤولية</a>.
                      </span>
                    </label>
                </div>

                <button type="submit" [disabled]="confirmForm.invalid || !agreedToTerms()" class="w-full py-3 text-md font-bold text-white rounded-lg bg-ph-blue hover:bg-ph-blue-dark disabled:bg-gray-400 disabled:cursor-not-allowed shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
                  إكمال التسجيل
              </button>
            </form>
          </div>
        }
      }

    </div>
  </div>
</div>